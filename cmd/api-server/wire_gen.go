// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"Hyper/config"
	"Hyper/dao"
	"Hyper/handler"
	"Hyper/pkg/database"
	"Hyper/pkg/server"
	"Hyper/service"
)

// Injectors from wire.go:

func InitServer(cfg *config.Config) *server.AppProvider {
	db := database.NewDB(cfg)
	users := dao.NewUsers(db)
	userService := &service.UserService{
		UsersRepo: users,
	}
	weChatService := &service.WeChatService{
		Config: cfg,
	}
	ossConfig := config.ProvideOssConfig(cfg)
	iOssService := service.NewOssService(ossConfig)
	auth := &handler.Auth{
		Config:        cfg,
		UserService:   userService,
		WeChatService: weChatService,
		OssService:    iOssService,
	}
	mapDao := dao.NewMapDao()
	mapService := &service.MapService{
		MapDao: mapDao,
	}
	handlerMap := &handler.Map{
		MapService: mapService,
		OssService: iOssService,
	}
  noteDAO := dao.NewNoteDAO(db)
	noteService := &service.NoteService{
		NoteDAO: noteDAO,
	}
	note := &handler.Note{
		OssService:  iOssService,
		NoteService: noteService,
		Config:      cfg,
	}
  messageDAO := dao.NewMessageDAO(db)
	messageService := service.NewMessageService(messageDAO)
	messageHandler := &handler.MessageHandler{
		Service: messageService,
	}
	messageReadDAO := dao.NewMessageReadDAO(db)
	messageReadService := service.NewMessageReadService(messageReadDAO)
	groupDAO := dao.NewGroupDAO(db)
	wsHandler := &handler.WSHandler{
		MessageService:     messageService,
		MessageReadService: messageReadService,
		GroupDAO:           groupDAO,
	}
  handlers := &server.Handlers{
		Auth:    auth,
		Map:     handlerMap,
		Note:    note,       
		Message: messageHandler, 
		WS:      wsHandler,      
	}

	engine := server.NewGinEngine(handlers)
	appProvider := &server.AppProvider{
		Config: cfg,
		Engine: engine,
	}
	return appProvider
}
